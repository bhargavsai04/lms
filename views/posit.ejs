<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta tags for character set, viewport, and CSRF token -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content="<%= csrfToken %>" />

    <!-- Internal CSS styles -->
    <style>
      /* Global styles */
      body {
        font-family: "Arial", sans-serif;
        display: flex;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      /* Styles for the graph box */
      .graph-container {
        border: 1px solid #ccc;
        padding: 15px;
        margin: 10px;
      }

      /* Styles for the chart container */
      .chart-wrapper {
        display: flex;
        border: 1px solid #ccc;
        margin-left: 0;
      }

      /* Styles for each bar */
      .bar-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        margin-right: 15px;
      }

      /* Styles for the bar content */
      .bar {
        width: 50px;
        margin: 5px;
        background-color: #3498db;
        text-align: center;
        color: white;
        font-size: 14px;
        padding: 5px;
        box-sizing: border-box;
      }

      /* Styles for the bar labels */
      .bar-label {
        margin-top: 10px;
        white-space: nowrap;
      }
    </style>
  </head>

  <body>
    <!-- Graph box container -->
    <div class="graph-container">
      <!-- Note about the graph -->
      <p class="note text-center text-xl font-bold mb-4">
        This graph illustrates the number of enrolled students per course. The
        height of each bar corresponds to the number of students enrolled, and
        the value is displayed at the top of the bar.
      </p>

      <!-- Chart container -->
      <div class="chart-wrapper" id="chartContainer">
        <!-- Loop through data to generate bars -->
        <% for (let i=0; i < courses.length; i++) { %>
        <!-- Bar element -->
        <div class="bar-container">
          <!-- Calculate bar height based on enrollment count -->
          <% const barHeight = enrollments[i] * 20; %>
          <!-- Bar with dynamic height -->
          <div class="bar" style="height: <%= barHeight %>px">
            <!-- Display enrollment count -->
            <%= enrollments[i] %>
          </div>
          <!-- Display course label -->
          <span class="bar-label"> <%= courses[i] %> </span>
        </div>
        <% } %>
      </div>
    </div>
  </body>
</html>
